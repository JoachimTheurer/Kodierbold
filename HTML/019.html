<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" type="text/css" href="style.css" />
	<title>Programmieren lernen mit p5 - Kapitel 3</title>
</head>

<body>

<h2>Wir bauen Funktionen: setup und draw</h2>

<p>Jedes p5 Programm enthält von Anfang an die beiden Anweisungen <code>setup()</code> und <code>draw()</code>. Bisher haben wir das einfach großzügig überlesen. Bevor wir weiter zeichnen, sollten wir rasch noch verstehen, was dahinter steckt.</p>

<p> Mit den Funktionen, wie <code>background(210)</code> oder <code>circle(100, 120, 88)</code>, die in Anweisungen verwendet, also &bdquo;aufgerufen&rdquo; werden können, bist du schon gut vertraut. Eine Funktion enthält alle Programmanweisungen, die für eine bestimmte Aufgabe nötig sind, zum Beispiel &bdquo;zeichne einen Kreis&rdquo;. Viele dieser fertigen Funktionen sind in p5 vorhanden und können direkt verwendet werden.</p>  

<p>Es gibt aber auch Funktionen, die noch nicht fertig sind. Sie müssen erst von dir zusammengebaut werden, damit sie dann eine bestimmte, von dir ausgedachte Aufgabe erledigen können. Ein Beispiel für solche Funktionen, die noch nicht fertig sind, sondern noch zusammengebastelt werden müssen, sind "setup" und "draw". Eine Funktion, die gerade neu gebaut werden soll, erkennst du an dem Wort <code>function</code> vor ihrem Namen. Man sagt, die neue Funktion wird &bdquo;angelegt&rdquo; oder &bdquo;definiert&rdquo;. </p>

<p>Was diese neue Funktion alles machen soll, wird in den Bereich zwischen den <b>geschweiften</b> Klammern <mark>{</mark> und <mark>}</mark> geschrieben, hinter den <b>runden</b> Klammern <mark>(</mark> und <mark>)</mark>, die direkt hinter dem Namen der neuen Funktion stehen.</p>

<p>Wenn die runden Klammern leer sind, braucht die neu angelegte Funktion keine Argumente, sowas gibt es auch. Dann schreibt man die runden Klammern trotzdem, aber es stehen eben keine Zahlen oder Worte in den Klammern. Das ist so für <code>function setup<mark>()</mark></code> und für <code>function draw<mark>()</mark></code>: den beiden werden keine Argumente mitgegeben.</p>


<span id="tbd">Code/000.js</span>	
<script type="text/p5" src="../Code/000.js" 
	data-autoplay data-height="200" data-preview-width="250" 
	data-p5-version="1.9.0">
</script>

<p> Mit <code>function setup()</code> wird eine neue Funktion "setup" angelegt. &bdquo;setup&rdquo; (sprich &bdquo;sätap&rdquo;) bedeutet Aufbau, Einrichten oder Vorbereiten. Wenn du ein p5 Programm mit PLAY startest, wird als erstes "setup" aufgerufen. Das ist in der Programmiersprache p5 so festgelegt und geschieht immer. Sobald das Programm die Funktion "setup" aufgerufen hat, verarbeitet es alle Anweisungen, die innerhalb von "setup" stehen - zum Beispiel <code>createCanvas(220, 200)</code>, sodass deine Zeichenfläche entsteht. Weil zum Zeichnen immer eine Vorbereitung, ein "setup", erforderlich ist, und immer eine Leinwand, ein &ldquo;Canvas&rdquo; benötigt wird, stehen diese Sachen immer schon von Anfang an im Editor - sonst müssten wir sie jedes Mal extra noch reinschreiben. </p>

<p>Vom Programm werden nacheinander alle Anweisungen innerhalb von "setup" abgearbeitet, natürlich auch alle Anweisungen, die du rein geschrieben hast - wie zum Beispiel <code>rectMode(CENTER)</code>. Das geht solange, bis die Funktion "setup" mit der schließenden Klammer <mark>}</mark> zu Ende geht.</p>

<p> Dann macht das p5 Programm automatisch mit der Verarbeitung der Funktion <code>draw()</code> weiter. &bdquo;draw&rdquo;, sprich &bdquo;draoh&rdquo; bedeutet zeichnen oder malen. </p> 

<p>Wie vorher in "setup", werden jetzt in "draw" nacheinander alle Anweisungen abgearbeitet, die im Bereich zwischen den geschweiften Klammern <mark>{</mark> und <mark>}</mark> stehen. In einem noch nicht veränderten Editor steht da drin schon der Aufruf der Funktion <code>background(200);</code>, damit wir es bequem haben und das nicht jedesmal selbst schreiben müssen - denn einen  Hintergrund braucht unsere Leinwand schliesslich immer. p5 findet in "draw" den Aufruf der Funktion "background" und führt ihn aus, ebenso wie alles andere, was noch in draw geschrieben wurde, bis die schließende Klammer <mark>}</mark> kommt. </p>

<p>Die Funktionen in einem Programm sind ineinander 
verschachtelt: eine Funktions-Schachtel wie "background" steckt in einer Schachtel wie "draw", die von einer p5 Funktion drumherum verarbeitet wird, die wir gar nicht kennen müssen. Die Funktions-Schachtel ganz aussen, mit allen Schachteln innendrin, ist dann das vollständige p5 Programm, das wir starten abspielen können. Die Aufgabe des p5 Programms ist es, die Schachteln in der richtigen Reihenfolge nacheinander auszupacken und die darin enthaltenen Funktionen der Reihe nach auszuführen.</p>  
	
<p> Warum gibtes aber nun zwei verschiedene Funktionen, "setup" und "draw", die von aussen aufgerufen werden? Eine einzige Funktion, die wir zusammenbasteln, das heisst in die wir unsere Anweisungen schreiben, sollte doch genügen?</p>

	<h2>setup & draw - der Unterschied</h2>

<p>Es gibt sowohl "setup" als auch "draw", weil sie von p5 ganz unterschiedlich aufgerufen werden.</p>

<ul>
<li>"setup" wird am Anfang des Programmablaufs, wenn Du die Abspiel-Taste
drückst, als Allererstes und <b>nur ein einziges Mal</b> aufgerufen. Hier kannst du alles das festlegen, was sich später nicht mehr ändern soll, zum Beispiel die Größe deiner Zeichenfläche. In "setup" wird sozusagen die Bühne für dein Programm vorbereitet.</li>

<li> "draw" wird von p5 immer und immer wieder, ohne Ende, aufgerufen. Alles, was innerhalb von "draw" steht, wird der Reihe nach verarbeitet, aber sobald p5 am Schluss von "draw" angekommen ist, geht es sofort wieder von vorne los. Was immer in "draw" steht, wird endlos oft ganz schnell hintereinander aufgerufen. "draw" bringt sozusagen Bewegung auf die Bühne.
<br> In "draw" kommen die Anweisungen rein, die sich bei bewegten  Zeichnungen ändern sollen, zum Beispiel welche Farbe oder Form oder welche Position eine Zeichnung hat. Weil "draw" ganz oft und schnell hintereinander aufgerufen wird, sieht das dann aus wie ein fliessender Übergang oder eine 
gleichmässige Bewegung.</li> 

<li>Wir brauchen den Unterschied zwischen "setup" und "draw", wenn wir
später bewegte Zeichnungen, sogenannte &bdquo;Animationen&rdquo; machen. Bei unseren Zeichnungen jetzt, bei denen sich nichts bewegt, spielt der Unterschied zwischen "setup" und "draw" keine Rolle. Du kannst also -momentan noch - "background", "circle" oder "square" in den "setup"-Bereich oder in den "draw"-Bereich schreiben, ganz wie du willst.</li>
</ul>


<h2>Wir bauen Funktionen: setup und draw</h2>

<p>Jedes p5 Programm enthält von Anfang an die beiden Anweisungen <code>setup()</code> und <code>draw()</code>. Bisher haben wir das einfach großzügig überlesen. Bevor wir weiter zeichnen, sollten wir rasch noch verstehen, was dahinter steckt.</p>

<p> Mit den Funktionen, wie <code>background(210)</code> oder <code>circle(100, 120, 88)</code>, die in Anweisungen verwendet, also &bdquo;aufgerufen&rdquo; werden können, bist du schon gut vertraut. Eine Funktion enthält alle Programmanweisungen, die für eine bestimmte Aufgabe nötig sind, zum Beispiel &bdquo;zeichne einen Kreis&rdquo;. Viele dieser fertigen Funktionen sind in p5 vorhanden und können direkt verwendet werden.</p>  

<p>Es gibt aber auch Funktionen, die noch nicht fertig sind. Sie müssen erst von dir zusammengebaut werden, damit sie dann eine bestimmte, von dir ausgedachte Aufgabe erledigen können. Ein Beispiel für solche Funktionen, die noch nicht fertig sind, sondern noch zusammengebastelt werden müssen, sind "setup" und "draw". Eine Funktion, die gerade neu gebaut werden soll, erkennst du an dem Wort <code>function</code> vor ihrem Namen. Man sagt, die neue Funktion wird &bdquo;angelegt&rdquo; oder &bdquo;definiert&rdquo;. </p>

<p>Was diese neue Funktion alles machen soll, wird in den Bereich zwischen den <b>geschweiften</b> Klammern <mark>{</mark> und <mark>}</mark> geschrieben, hinter den <b>runden</b> Klammern <mark>(</mark> und <mark>)</mark>, die direkt hinter dem Namen der neuen Funktion stehen.</p>

<p>Wenn die runden Klammern leer sind, braucht die neu angelegte Funktion keine Argumente, sowas gibt es auch. Dann schreibt man die runden Klammern trotzdem, aber es stehen eben keine Zahlen oder Worte in den Klammern. Das ist so für <code>function setup<mark>()</mark></code> und für <code>function draw<mark>()</mark></code>: den beiden werden keine Argumente mitgegeben.</p>


<span id="tbd">Code/000.js</span>	
<script type="text/p5" src="../Code/000.js" 
	data-autoplay data-height="200" data-preview-width="250" 
	data-p5-version="1.9.0">
</script>

<p> Mit <code>function setup()</code> wird eine neue Funktion "setup" angelegt. &bdquo;setup&rdquo; (sprich &bdquo;sätap&rdquo;) bedeutet Aufbau, Einrichten oder Vorbereiten. Wenn du ein p5 Programm mit PLAY startest, wird als erstes "setup" aufgerufen. Das ist in der Programmiersprache p5 so festgelegt und geschieht immer. Sobald das Programm die Funktion "setup" aufgerufen hat, verarbeitet es alle Anweisungen, die innerhalb von "setup" stehen - zum Beispiel <code>createCanvas(220, 200)</code>, sodass deine Zeichenfläche entsteht. Weil zum Zeichnen immer eine Vorbereitung, ein "setup", erforderlich ist, und immer eine Leinwand, ein &ldquo;Canvas&rdquo; benötigt wird, stehen diese Sachen immer schon von Anfang an im Editor - sonst müssten wir sie jedes Mal extra noch reinschreiben. </p>

<p>Vom Programm werden nacheinander alle Anweisungen innerhalb von "setup" abgearbeitet, natürlich auch alle Anweisungen, die du rein geschrieben hast - wie zum Beispiel <code>rectMode(CENTER)</code>. Das geht solange, bis die Funktion "setup" mit der schließenden Klammer <mark>}</mark> zu Ende geht.</p>

<p> Dann macht das p5 Programm automatisch mit der Verarbeitung der Funktion <code>draw()</code> weiter. &bdquo;draw&rdquo;, sprich &bdquo;draoh&rdquo; bedeutet zeichnen oder malen. </p> 

<p>Wie vorher in "setup", werden jetzt in "draw" nacheinander alle Anweisungen abgearbeitet, die im Bereich zwischen den geschweiften Klammern <mark>{</mark> und <mark>}</mark> stehen. In einem noch nicht veränderten Editor steht da drin schon der Aufruf der Funktion <code>background(200);</code>, damit wir es bequem haben und das nicht jedesmal selbst schreiben müssen - denn einen  Hintergrund braucht unsere Leinwand schliesslich immer. p5 findet in "draw" den Aufruf der Funktion "background" und führt ihn aus, ebenso wie alles andere, was noch in draw geschrieben wurde, bis die schließende Klammer <mark>}</mark> kommt. </p>

<p>Die Funktionen in einem Programm sind ineinander 
verschachtelt: eine Funktions-Schachtel wie "background" steckt in einer Schachtel wie "draw", die von einer p5 Funktion drumherum verarbeitet wird, die wir gar nicht kennen müssen. Die Funktions-Schachtel ganz aussen, mit allen Schachteln innendrin, ist dann das vollständige p5 Programm, das wir starten abspielen können. Die Aufgabe des p5 Programms ist es, die Schachteln in der richtigen Reihenfolge nacheinander auszupacken und die darin enthaltenen Funktionen der Reihe nach auszuführen.</p>  
	
<p> Warum gibtes aber nun zwei verschiedene Funktionen, "setup" und "draw", die von aussen aufgerufen werden? Eine einzige Funktion, die wir zusammenbasteln, das heisst in die wir unsere Anweisungen schreiben, sollte doch genügen?</p>

	<h2>setup & draw - der Unterschied</h2>

<p>Es gibt sowohl "setup" als auch "draw", weil sie von p5 ganz unterschiedlich aufgerufen werden.</p>

<ul>
<li>"setup" wird am Anfang des Programmablaufs, wenn Du die Abspiel-Taste
drückst, als Allererstes und <b>nur ein einziges Mal</b> aufgerufen. Hier kannst du alles das festlegen, was sich später nicht mehr ändern soll, zum Beispiel die Größe deiner Zeichenfläche. In "setup" wird sozusagen die Bühne für dein Programm vorbereitet.</li>

<li> "draw" wird von p5 immer und immer wieder, ohne Ende, aufgerufen. Alles, was innerhalb von "draw" steht, wird der Reihe nach verarbeitet, aber sobald p5 am Schluss von "draw" angekommen ist, geht es sofort wieder von vorne los. Was immer in "draw" steht, wird endlos oft ganz schnell hintereinander aufgerufen. "draw" bringt sozusagen Bewegung auf die Bühne.
<br> In "draw" kommen die Anweisungen rein, die sich bei bewegten  Zeichnungen ändern sollen, zum Beispiel welche Farbe oder Form oder welche Position eine Zeichnung hat. Weil "draw" ganz oft und schnell hintereinander aufgerufen wird, sieht das dann aus wie ein fliessender Übergang oder eine 
gleichmässige Bewegung.</li> 

<li>Wir brauchen den Unterschied zwischen "setup" und "draw", wenn wir
später bewegte Zeichnungen, sogenannte &bdquo;Animationen&rdquo; machen. Bei unseren Zeichnungen jetzt, bei denen sich nichts bewegt, spielt der Unterschied zwischen "setup" und "draw" keine Rolle. Du kannst also -momentan noch - "background", "circle" oder "square" in den "setup"-Bereich oder in den "draw"-Bereich schreiben, ganz wie du willst.</li>
</ul>



=============================================

	Wenn du das Programm startest, ruft p5 den "setup" Teil nur einmal auf, aber
	den "draw" Teil ganz oft immer wieder. Das ist für bewegte Zeichnungen, die
	man Animationen nennt, sehr hilfreich. Momentan macht das für uns keinen
	Unterschied, und wir können sowohl in setup als auch in draw zeichnen, wie
	es uns besser gefällt.
Wir bauen dann in
	jeden Aufruf von draw eine kleine Änderung ein,



</li>
</ul>
	draw wird vom p5 Programm immer und immer wieder, ohne Ende, aufgerufen und
	durchlaufen. Hier kommen die Sachen rein, die sich ändern sollen, wenn wir
	später bewegte Zeichnungen machen. Dann ist es nützlich, dass alles in
	"draw() immer wieder neu und von vorn durchlaufen wird. Wir bauen dann in
	jeden Aufruf von draw eine kleine Änderung ein, zum Beispiel welche Farbe
	oder Form oder welchen Ort eine Zeichnung hat. Weil "draw ganz oft und
	schnell hintereinander aufgerufen wird, sieht das dann aus wie ein
	fliessender Übergang oder eine gleichmässige Bewegung.

	<h2>setup vs draw</h2>

	Das war jetzt eine Menge Theorie, aber keine Bange: wir kommen gleich dazu,
	selber zu zeichnen.

	[$merk] Nur noch eine kleine Zusammenfassung vorher: Ein p5 Programm läuft
	los, wenn du auf den Abspiel-Knopf drückst. Es besteht von Vorneherein aus
	zwei Bausteinen oder Funktionen, in die wir unsere Anweisungen schreiben.

	Im ersten Teil, der Funktion "setup, wird deine Zeichnung, der sketch,
	vorbereitet. Zuerst ist es sinnvoll, die Leinwand, den canvas, zu erstellen.
	Dazu wird eine schon vorhandene Funktion aufgerufen, der du die gewünschte
	Größe der Leinwand in Pixeln mitgibst: createCanvas(400, 400) mit zum
	Beispiel 400 Pixel-nach-Rechts und 400 Pixel-nach-Unten).

	Wir dürfen nicht vergessen, zum Abschluss jeder Anweisung einen Strichpunkt
	an das Ende der Zeile zu setzen.

	Der zweite Teil ist die Funktion "draw()", in den die Anweisungen für die
	Zeichnung geschrieben werden. Zuerst wird eine Funktion aufgerufen, um den
	Hintergrund der Leinwand in einer bestimmten Graustufe auszumalen, zum
	Beispiel grau-blau mit "background(200). Je größer die Zahl in Klammern für
	die Graustufe, das sogenannte Argument des Funktionsaufrufs, desto heller
	wird der Hintergrund.

	Wenn du das Programm startest, ruft p5 den "setup" Teil nur einmal auf, aber
	den "draw" Teil ganz oft immer wieder. Das ist für bewegte Zeichnungen, die
	man Animationen nennt, sehr hilfreich. Momentan macht das für uns keinen
	Unterschied, und wir können sowohl in setup als auch in draw zeichnen, wie
	es uns besser gefällt.

	[$prog Kreis in draw]
	<script type="text/p5" data-p5-version="0.2.0" data-autoplay
		data-preview-width="300" data-height="300">
function setup() {
  createCanvas(200, 200);
  background(220);
  circle(100, 100, 50);
}
</script>


	[$prog Kreis in setup]

	Es kommt aber immer streng auf die Reihenfolge an! Der Aufruf von "circle
	muss hinter dem Aufruf von "background stehen, egal ob in setup oder draw -
	sonst wird dein Kreis wieder übermalt.





			<h3>1.3.1 Eigenschaft von draw()</h3>

	Zwischendrin ein Rätsel: Kannst du erkären, was in diesem Programm geschieht?

	function setup() {
    createCanvas(250, 240);
}

function draw() { 
    background(200, 100, 50);
    circle(125, 125, 200);
    square(65, 65, 120);
    triangle(125, 85, 95, 150, 155, 150);
    fill(130, 250, 0);
}

Obwohl <code>fill(130, 250, 0);</code> ganz am Schluss von draw() steht, sind trotzdem alle drei Figuren grasgrün. Warum?

	draw() wird immer und immer wieder aufgerufen, solange das Programm läuft. Und diese Aufrufe von draw() finden superschnell hintereinander statt - so schnell, dass du den allerersten Aufruf gar nicht sehen kannst. Am Ende des allerersten Aufrufs steht <code>fill(130, 250, 0);</code>, und ab dann wird jede Figur grasgrün gefüllt. Beim zweiten blitzschnellen Aufruf von <code>draw();</code> wird diese Füllfarbe verwendet, denn es gibt kein neues <code>fill(130, 250, 0);</code> irgendwo anders im Programm, das dieses <code>fill(130, 250, 0);</code> überschreibt - es gilt also ab sofort für immer. 

	Wenn du den allerersten Aufruf von draw() in einem winzigen Bruchteil einer Sekunde sehen könntest, wären alle Figuren noch mit der Voreinstellung "weiß" gefüllt, solange die <code>fill(130, 250, 0);</code> vom Programm noch nicht erreicht wird. Es ist aber Absicht, draw() ganz schnell aufzurufen, damit mögliche Änderungen der Figuren ohne Ruckeln erscheinen. Momentan zeichnen wir immer das Gleiche und dieser blitzschnelle Aufruf von draw() ganz schnell hintereinander ist noch gar nicht zu sehen. Man muss aber im Hinterkopf behalten, dass draw() nicht nur einmal - wie setup() -, sondern ganz viele Male schnell hintereinander aufgerufen wird, um zu verstehen, was im Programm passiert.

Verschiebe den gesamten Code von aus draw() nach setup, hinter createCanvas, lasse draw() leer und beobachte, was dann geschieht. Kannst du es erklären?
	


=============================================

eigen Wackelfigur Funktion

=============================================

		<button onclick="document.location='014.html'">Zurück</button>
		<button onclick="document.location='018.html'">Weiter</button>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.1/p5.js"></script>
<script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>

</html>
